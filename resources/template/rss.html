<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css" href="{{@pluResPath}}template/rss.css">
    <style>
        body {
            min-width: 600px;
            /*min-height: 600px;*/
            /*padding: 20px;*/
            overflow: hidden;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="three">
            <h1>{{@title}}</h1>
        </div>
        <div class="date">
            {{pubDate}}&nbsp;&nbsp;&nbsp;来源: {{link}}
        </div>
        <div class="description">
            {{@content}}
        </div>
        <div class="footer">
            <div class="divider"></div>
            Pushed by Karin-Plugin-Orchid & Powered by Karin
        </div>
    </div>

</body>
<script>
    // 强制所有图片立即加载
    function forceLoadImages() {
        const images = document.getElementsByTagName('img');
        if (images.length === 0) {
            console.log('No images to load');
            return;
        }

        let loadedCount = 0;
        const totalImages = images.length;

        function checkAllLoaded() {
            loadedCount++;
            if (loadedCount === totalImages) {
                console.log('All images loaded');
            }
        }

        for (let i = 0; i < totalImages; i++) {
            const img = images[i];
            // 强制 eager loading
            img.loading = "eager";

            if (img.complete) {
                checkAllLoaded();
            } else {
                // 显式触发预加载
                const preloader = new Image();
                preloader.onload = checkAllLoaded;
                preloader.onerror = checkAllLoaded;
                preloader.src = img.src;

                // 同时监听原图的加载事件作为双重保险
                img.onload = checkAllLoaded;
                img.onerror = checkAllLoaded;
            }
        }

        // 5秒后强制认为加载完成，防止无限等待
        setTimeout(() => {
            console.log('Force load timeout reached');
        }, 5000);
    }

    // 页面加载时执行
    window.onload = forceLoadImages;
    // 立即执行一次以防 window.onload 已经错过
    if (document.readyState === 'complete') {
        forceLoadImages();
    }
</script>

</html>

<style>
    .container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url("{{background}}");
        background-size: cover;
        /* 图片按比例缩放，覆盖整个容器 */
        background-position: center;
        /* 图片居中显示 */
        filter: blur(10px);
        /* 高斯模糊效果，10px 可以根据需要调整 */
        opacity: 0.5;
        /* 50%透明度 */
        z-index: -1;
        /* 确保伪元素在其他内容下方 */
    }
</style>